let t={main:document.querySelector(".main"),todoWrapper:document.querySelector(".todo"),sortParamsWrapper:document.querySelector(".todos__sort_params"),sortParams:document.querySelectorAll(".todos__sort_params_param"),todosList:document.querySelector(".todos__list"),todosSort:document.querySelector(".todos__sort"),changeThemeBtn:document.querySelector(".todo__header_btn"),todoAdd:document.querySelector(".todo__add"),todoAddMark:document.querySelector(".todo__mark--add"),todoAddText:document.querySelector(".todo__add_text"),sortAllBtn:document.querySelector(".sort__param--all"),sortActiveBtn:document.querySelector(".sort__param--active"),sortCompletedBtn:document.querySelector(".sort__param--completed"),sortCompletedClear:document.querySelector(".todos__sort_clear"),footerText:document.querySelector(".todo__footer_text"),mediaQueryMobile:window.matchMedia("(max-width: 468px)"),mediaQueryTablet:window.matchMedia("(max-width: 768px)")};function e(){let t=document.querySelector(".todo__smth");t&&t.remove()}function o(e,o){let a=document.createElement("li");0===o?(a.classList.add("todo__smth"),a.classList.add("fadeIn"),a.innerText=e,t.todosList.append(a),"light"===localStorage.getItem("theme")?a.classList.add("todo__smth--light"):a.classList.remove("todo__smth--light")):a.remove()}function a(t){t.classList.add("toggle__mark--checked"),t.classList.add("scale-out-center"),setTimeout(()=>{t.classList.remove("scale-out-center"),t.classList.add("scale-up-center"),t.classList.remove("toggle__mark--checked")},480),setTimeout(()=>t.classList.remove("scale-up-center"),1e3)}function s(){let t=[...document.querySelector(".todos__list").querySelectorAll(".todo__input")].map(t=>Number(t.dataset.id)),e=JSON.parse(localStorage.getItem("todoList"))||[],o=t.map(t=>e.find(([e,o,a])=>Number(a)===t)),a=e.filter(([e,o,a])=>!t.includes(Number(a)));localStorage.setItem("todoList",JSON.stringify([...o,...a]))}function r(...t){t.forEach(t=>{switch(t){case"todo__input":case"todo__mark":case"todo__text":document.querySelectorAll(`.${t}`)}})}function d(){t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),document.querySelector(".sort__param--all").classList.add("activeBtn")}function l(){let t=document.querySelectorAll(".todo__input"),e=0,o=document.querySelector(".todos__sort_left");t.forEach(t=>e++),o.innerText=`${e} items left`}function i(o,s,c=null,m=!0){c=Number(c)||Date.now();let u=document.querySelector(".todo__add_text");if(!t.sortAllBtn.classList.contains("activeBtn")&&m){if(!u.value)return void u.setAttribute("placeholder","This field can`t be empty!");let e=JSON.parse(localStorage.getItem("todoList"))||[];return localStorage.setItem("todoList",JSON.stringify([...e,[u.value,"activeTodo",c]])),localStorage.setItem("activeSortBtn",JSON.stringify("sort__param--all")),d(),n.call(t.sortAllBtn),u.value="",void a(t.todoAddMark)}if(!u.value&&m)return void u.setAttribute("placeholder","This field can`t be empty!");e(),u.setAttribute("placeholder","Create a new todo...");let _=document.createElement("li");if(_.classList.add("todo__input"),_.classList.add("activeTodo"),_.classList.add("fadeIn"),_.setAttribute("data-id",c),t.mediaQueryMobile.matches?_.innerHTML=`
            <div class="todo__mark"></div>
            <input type="text" placeholder="Change your todo..." class="todo__text">
            <button class="todo__cross"></button>
        `:_.innerHTML=`
            <div class="todo__mark"></div>
            <input type="text" placeholder="Change your todo..." class="todo__text">
        `,"light"===localStorage.getItem("theme")&&(_.classList.add("todo__input--light"),_.children[0].classList.add("todo__mark--light"),_.children[1].classList.add("todo__text--light")),_.querySelector(".todo__text").value="object"==typeof o?u.value:String(o).replace(/[<>]/g,""),"completedTodo"===s&&(_.classList.add("completedTodo"),_.classList.remove("activeTodo"),_.children[0].classList.add("toggle__mark--checked"),_.children[1].classList.add("toggle__mark--cross")),t.todosList.append(_),r("todo__input","todo__mark","todo__text"),l(),_.scrollIntoView({block:"end"}),m){let e=JSON.parse(localStorage.getItem("todoList"))||[];localStorage.setItem("todoList",JSON.stringify([...e,[u.value,_.classList.contains("activeTodo")?"activeTodo":"completedTodo",c]])),u.value="",a(t.todoAddMark)}}function c(){t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),this.classList.add("activeBtn"),localStorage.setItem("activeSortBtn",JSON.stringify(this.classList[1]))}function n(){let e="",a="";this.classList.contains("sort__param--all")?(e="todo__input",a="Add something..."):this.classList.contains("sort__param--active")?(e="activeTodo",a="No Active yet..."):(e="completedTodo",a="No Completed yet...");let s=0;t.todosList.innerHTML="",(JSON.parse(localStorage.getItem("todoList"))||[]).forEach(([t,o,a])=>{("todo__input"===e||"activeTodo"===e&&"activeTodo"===o||"completedTodo"===e&&"completedTodo"===o)&&(i(t,o,a,!1),s++)}),o(a,s),t.mediaQueryMobile.matches?t.todosList.after(t.todosSort):t.todoWrapper.append(t.todosSort),t.todoWrapper.append(t.footerText)}function m(e,o=!0){o&&(t.changeThemeBtn.classList.toggle("todo__header_btn--light"),t.changeThemeBtn.classList.contains("todo__header_btn--light")?localStorage.setItem("theme","light"):localStorage.setItem("theme","dark"));let a=[[t.changeThemeBtn,"todo__header_btn--light"],[t.todosList,"todos__list--light"],[t.todosSort,"todos__sort--light"],[t.sortParamsWrapper,"todos__sort_params--light"],[t.todoAdd,"todo__add--light"],[t.todoAddText,"todo__add_text--light"],[t.todoAddMark,"todo__mark--add--light"],[document.querySelector(".todo__smth")?document.querySelector(".todo__smth"):null,"todo__smth--light"]],s=[[document.querySelectorAll(".todo__input"),"todo__input--light"],[document.querySelectorAll(".todo__mark"),"todo__mark--light"],[document.querySelectorAll(".todo__text"),"todo__text--light"]];"light"===localStorage.getItem("theme")?(t.mediaQueryTablet.matches?t.main.classList.add("main--tablet","main--tablet--light"):(t.main.classList.remove("main--tablet"),t.main.classList.add("main--light")),a.forEach(([t,e])=>{null!==t&&t.classList.add(e)}),s.forEach(([t,e])=>{t.forEach(t=>t.classList.add(e))})):(t.mediaQueryTablet.matches?(t.main.classList.add("main--tablet"),t.main.classList.remove("main--tablet--light")):t.main.classList.remove("main--tablet","main--light"),a.forEach(([t,e])=>{null!==t&&t.classList.remove(e)}),s.forEach(([t,e])=>{t.forEach(t=>t.classList.remove(e))}))}function u(){m(event,!1),(JSON.parse(localStorage.getItem("todoList"))||[]).forEach(([t,e,o])=>{i(t,e,o,!1),r("todo__input","todo__mark","todo__text"),l()}),"sort__param--active"===JSON.parse(localStorage.getItem("activeSortBtn"))?(t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),t.sortActiveBtn.classList.add("activeBtn"),n.call(t.sortActiveBtn)):"sort__param--completed"===JSON.parse(localStorage.getItem("activeSortBtn"))&&(t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),t.sortCompletedBtn.classList.add("activeBtn"),n.call(t.sortCompletedBtn))}function _(t){let e=document.querySelectorAll(".todo__input"),a=document.querySelector(".todos__list"),s=t.parentNode.getAttribute("data-id");t.parentNode.classList.add("fadeOut"),setTimeout(()=>{t.parentNode.classList.remove("fadeOut");let r=(JSON.parse(localStorage.getItem("todoList"))||[]).filter(([t,e,o])=>{if(Number(s)!==Number(o))return[t,e,o]});localStorage.setItem("todoList",JSON.stringify([...r]));let d=[...e].findIndex(t=>Number(t.getAttribute("data-id"))===Number(s));e[d].remove(),e=[...e].filter((t,e)=>e!==d),0===a.children.length&&o("Add something...",0),l()},480)}function p(e){let o=localStorage.getItem("theme");switch(!0){case e.matches&&"light"===o:t.main.classList.add("main--tablet--light"),t.main.classList.remove("main--tablet");break;case e.matches&&"dark"===o:t.main.classList.add("main--tablet"),t.main.classList.remove("main--tablet--light");break;case!e.matches&&"light"===o:t.main.classList.remove("main--tablet","main--tablet--light"),t.main.classList.add("main--light");break;default:t.main.classList.remove("main--tablet","main--tablet--light","main--light")}}function g(e){let o;e.matches?(t.sortParamsWrapper.classList.add("todo__params"),t.todoWrapper.append(t.sortParamsWrapper),t.todoWrapper.append(t.footerText),o=document.querySelectorAll(".todo__input"),t.mediaQueryMobile.matches&&o.forEach(t=>{let e=document.createElement("button");e.classList.add("todo__cross"),t.append(e)})):(t.sortParamsWrapper.classList.remove("todo__params"),t.todosSort.insertBefore(t.sortParamsWrapper,t.sortCompletedClear),document.querySelectorAll(".todo__cross").forEach(t=>{t.removeEventListener("click",_),t.remove()}))}function h(){let t=(JSON.parse(localStorage.getItem("todoList"))||[]).map(([t,e,o])=>Number(this.parentNode.getAttribute("data-id"))===Number(o)?[this.value,e,o]:[t,e,o]);localStorage.setItem("todoList",JSON.stringify(t))}document.addEventListener("DOMContentLoaded",u),t.mediaQueryMobile.addEventListener("change",g),t.mediaQueryTablet.addEventListener("change",p),t.todoAddMark.addEventListener("click",i),t.sortAllBtn.addEventListener("click",n),t.sortActiveBtn.addEventListener("click",n),t.sortCompletedBtn.addEventListener("click",n),t.sortCompletedClear.addEventListener("click",function(){let a=document.querySelectorAll(".todo__input"),s=0;if(0===a.length)return;let i=(JSON.parse(localStorage.getItem("todoList"))||[]).filter(([t,e,o])=>{if("completedTodo"!==e)return[t,e,o]});localStorage.setItem("todoList",JSON.stringify([...i])),e(),a.forEach(e=>{e.classList.contains("completedTodo")?e.remove():(t.todosList.append(e),s++)}),o("Add something...",s),t.mediaQueryMobile.matches?t.todosList.after(t.todosSort):t.todoWrapper.append(t.todosSort),t.todoWrapper.append(t.footerText),localStorage.setItem("activeSortBtn",JSON.stringify("sort__param--all")),d(),r("todo__input","todo__mark","todo__text"),l()}),t.sortParams.forEach(t=>t.addEventListener("click",c)),document.addEventListener("DOMContentLoaded",u),t.changeThemeBtn.addEventListener("click",m),t.todoAddText.addEventListener("keydown",function(e){"Enter"===e.key&&(i(this.value,"activeTodo"),e.preventDefault(),t.todoAddText.blur())}),t.todosList.addEventListener("click",t=>{if(t.target.classList.contains("todo__mark")){var e;let o;(e=t.target).parentNode.classList.toggle("activeTodo"),e.classList.toggle("toggle__mark--checked"),e.nextElementSibling.classList.toggle("toggle__mark--cross"),e.parentNode.classList.toggle("completedTodo"),o=(JSON.parse(localStorage.getItem("todoList"))||[]).map(([t,o,a])=>(Number(a)===Number(e.parentNode.getAttribute("data-id"))&&(o=e.parentNode.classList.contains("activeTodo")?"activeTodo":"completedTodo"),[t,o,a])),localStorage.setItem("todoList",JSON.stringify(o))}else t.target.classList.contains("todo__text")?t.target.addEventListener("input",h):t.target.classList.contains("todo__cross")&&_(t.target)}),t.todosList.addEventListener("mousedown",t=>{document.querySelectorAll(".todo__input").forEach(t=>{t.style.border="1px solid transparent",t.style.borderBottom="1px solid #666666"});let e=t.target.closest(".todo__input");setTimeout(()=>{e&&(e.setAttribute("draggable","true"),e.classList.add("selected"))},1e3),e.style.border="1px dashed #83aaf8ff"}),t.todosList.addEventListener("mouseup",t=>{let e=t.target.closest(".todo__input");e&&(e.classList.remove("selected"),e.removeAttribute("draggable"),e.style.border="1px solid transparent",e.style.borderBottom="1px solid #666666",s())}),t.todosList.addEventListener("touchstart",t=>{document.querySelectorAll(".todo__input").forEach(t=>{t.style.border="1px solid transparent",t.style.borderBottom="1px solid #666666"});let e=t.target.closest(".todo__input");setTimeout(()=>{e&&(e.setAttribute("draggable","true"),e.classList.add("selected"))},1e3),e.style.border="1px dashed #83aaf8ff"}),t.todosList.addEventListener("touchend",t=>{let e=t.target.closest(".todo__input");e&&(e.classList.remove("selected"),e.removeAttribute("draggable"),e.style.border="1px solid transparent",e.style.borderBottom="1px solid #666666",s())}),t.todosList.addEventListener("dragover",e=>{e.preventDefault();let o=document.querySelector(".selected");if(!o)return;let a=e.target.closest(".todo__input");if(!a||o===a)return;let s=a.getBoundingClientRect();e.clientY-s.top<s.height/2?t.todosList.insertBefore(o,a):t.todosList.insertBefore(o,a.nextElementSibling)}),t.mediaQueryMobile.matches&&g(t.mediaQueryMobile),t.mediaQueryTablet.matches&&p(t.mediaQueryTablet);
//# sourceMappingURL=ToDo-JavaScript-.4a5e8486.js.map

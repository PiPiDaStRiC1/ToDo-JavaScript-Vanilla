let t={main:document.querySelector(".main"),todoWrapper:document.querySelector(".todo"),sortParamsWrapper:document.querySelector(".todos__sort_params"),sortParams:document.querySelectorAll(".todos__sort_params_param"),todosList:document.querySelector(".todos__list"),todosSort:document.querySelector(".todos__sort"),changeThemeBtn:document.querySelector(".todo__header_btn"),todoAdd:document.querySelector(".todo__add"),todoAddMark:document.querySelector(".todo__mark--add"),todoAddText:document.querySelector(".todo__add_text"),sortAllBtn:document.querySelector(".sort__param--all"),sortActiveBtn:document.querySelector(".sort__param--active"),sortCompletedBtn:document.querySelector(".sort__param--completed"),sortCompletedClear:document.querySelector(".todos__sort_clear"),footerText:document.querySelector(".todo__footer_text"),mediaQueryMobile:window.matchMedia("(max-width: 468px)"),mediaQueryTablet:window.matchMedia("(max-width: 768px)")};function e(){let t=document.querySelector(".todo__smth");t&&t.remove()}function o(e,o){let a=document.createElement("li");0===o?(a.classList.add("todo__smth"),a.classList.add("fadeIn"),a.innerText=e,t.todosList.append(a),"light"===localStorage.getItem("theme")?a.classList.add("todo__smth--light"):a.classList.remove("todo__smth--light")):a.remove()}function a(t){t.classList.add("toggle__mark--checked"),t.classList.add("scale-out-center"),setTimeout(()=>{t.classList.remove("scale-out-center"),t.classList.add("scale-up-center"),t.classList.remove("toggle__mark--checked")},480),setTimeout(()=>t.classList.remove("scale-up-center"),1e3)}function s(...t){t.forEach(t=>{switch(t){case"todo__input":case"todo__mark":case"todo__text":document.querySelectorAll(`.${t}`)}})}function r(){t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),document.querySelector(".sort__param--all").classList.add("activeBtn")}function d(){let t=document.querySelectorAll(".todo__input"),e=0,o=document.querySelector(".todos__sort_left");t.forEach(t=>e++),o.innerText=`${e} items left`}function l(t){let e=document.querySelectorAll(".todo__input"),o=document.querySelector(".todos__list"),a=t.parentNode.getAttribute("data-id");t.parentNode.classList.add("fadeOut"),setTimeout(()=>{t.parentNode.classList.remove("fadeOut");let s=(JSON.parse(localStorage.getItem("todoList"))||[]).filter(([t,e,o])=>{if(Number(a)!==Number(o))return[t,e,o]});localStorage.setItem("todoList",JSON.stringify([...s]));let r=[...e].findIndex(t=>Number(t.getAttribute("data-id"))===Number(a));e[r].remove(),e=[...e].filter((t,e)=>e!==r),0===o.children.length&&createSmthField("Add something...",0),d()},480)}function i(e){let o=localStorage.getItem("theme");switch(!0){case e.matches&&"light"===o:t.main.classList.add("main--tablet--light"),t.main.classList.remove("main--tablet");break;case e.matches&&"dark"===o:t.main.classList.add("main--tablet"),t.main.classList.remove("main--tablet--light");break;case!e.matches&&"light"===o:t.main.classList.remove("main--tablet","main--tablet--light"),t.main.classList.add("main--light");break;default:t.main.classList.remove("main--tablet","main--tablet--light","main--light")}}function c(e){e.matches?(t.sortParamsWrapper.classList.add("todo__params"),t.todoWrapper.append(t.sortParamsWrapper),t.todoWrapper.append(t.footerText),n()):(t.sortParamsWrapper.classList.remove("todo__params"),t.todosSort.insertBefore(t.sortParamsWrapper,t.sortCompletedClear),document.querySelectorAll(".todo__cross").forEach(t=>{t.removeEventListener("click",l),t.remove()}))}function n(){let e=document.querySelectorAll(".todo__input");t.mediaQueryMobile.matches&&e.forEach(t=>{let e=document.createElement("button");e.classList.add("todo__cross"),t.append(e)})}function m(o,l,i=null,c=!0){i=Number(i)||Date.now();let _=document.querySelector(".todo__add_text");if(!t.sortAllBtn.classList.contains("activeBtn")&&c){if(!_.value)return void _.setAttribute("placeholder","This field can`t be empty!");let e=JSON.parse(localStorage.getItem("todoList"))||[];return localStorage.setItem("todoList",JSON.stringify([...e,[_.value,"activeTodo",i]])),localStorage.setItem("activeSortBtn",JSON.stringify("sort__param--all")),r(),u.call(t.sortAllBtn),_.value="",void a(t.todoAddMark)}if(!_.value&&c)return void _.setAttribute("placeholder","This field can`t be empty!");e(),_.setAttribute("placeholder","Create a new todo...");let g=document.createElement("li");if(g.classList.add("todo__input"),g.classList.add("activeTodo"),g.classList.add("fadeIn"),g.setAttribute("data-id",i),g.setAttribute("draggable","true"),t.mediaQueryMobile.matches?g.innerHTML=`
            <div class="todo__mark"></div>
            <input type="text" placeholder="Change your todo..." class="todo__text">
            <button class="todo__cross"></button>
        `:g.innerHTML=`
            <div class="todo__mark"></div>
            <input type="text" placeholder="Change your todo..." class="todo__text">
        `,"light"===localStorage.getItem("theme")&&(g.classList.add("todo__input--light"),g.children[0].classList.add("todo__mark--light"),g.children[1].classList.add("todo__text--light")),g.querySelector(".todo__text").value="object"==typeof o?_.value:String(o).replace(/[<>]/g,""),"completedTodo"===l&&(g.classList.add("completedTodo"),g.classList.remove("activeTodo"),g.children[0].classList.add("toggle__mark--checked"),g.children[1].classList.add("toggle__mark--cross")),t.todosList.append(g),s("todo__input","todo__mark","todo__text"),d(),n(),g.scrollIntoView({block:"end"}),c){let e=JSON.parse(localStorage.getItem("todoList"))||[];localStorage.setItem("todoList",JSON.stringify([...e,[_.value,g.classList.contains("activeTodo")?"activeTodo":"completedTodo",i]])),_.value="",a(t.todoAddMark)}}function _(){t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),this.classList.add("activeBtn"),localStorage.setItem("activeSortBtn",JSON.stringify(this.classList[1]))}function u(){let e="",a="";this.classList.contains("sort__param--all")?(e="todo__input",a="Add something..."):this.classList.contains("sort__param--active")?(e="activeTodo",a="No Active yet..."):(e="completedTodo",a="No Completed yet...");let s=0;t.todosList.innerHTML="",(JSON.parse(localStorage.getItem("todoList"))||[]).forEach(([t,o,a])=>{("todo__input"===e||"activeTodo"===e&&"activeTodo"===o||"completedTodo"===e&&"completedTodo"===o)&&(m(t,o,a,!1),s++)}),o(a,s),t.mediaQueryMobile.matches?t.todosList.after(t.todosSort):t.todoWrapper.append(t.todosSort),t.todoWrapper.append(t.footerText)}function g(e,o=!0){o&&(t.changeThemeBtn.classList.toggle("todo__header_btn--light"),t.changeThemeBtn.classList.contains("todo__header_btn--light")?localStorage.setItem("theme","light"):localStorage.setItem("theme","dark"));let a=[[t.changeThemeBtn,"todo__header_btn--light"],[t.todosList,"todos__list--light"],[t.todosSort,"todos__sort--light"],[t.sortParamsWrapper,"todos__sort_params--light"],[t.todoAdd,"todo__add--light"],[t.todoAddText,"todo__add_text--light"],[t.todoAddMark,"todo__mark--add--light"],[document.querySelector(".todo__smth")?document.querySelector(".todo__smth"):null,"todo__smth--light"]],s=[[document.querySelectorAll(".todo__input"),"todo__input--light"],[document.querySelectorAll(".todo__mark"),"todo__mark--light"],[document.querySelectorAll(".todo__text"),"todo__text--light"]];"light"===localStorage.getItem("theme")?(t.mediaQueryTablet.matches?t.main.classList.add("main--tablet","main--tablet--light"):(t.main.classList.remove("main--tablet"),t.main.classList.add("main--light")),a.forEach(([t,e])=>{null!==t&&t.classList.add(e)}),s.forEach(([t,e])=>{t.forEach(t=>t.classList.add(e))})):(t.mediaQueryTablet.matches?(t.main.classList.add("main--tablet"),t.main.classList.remove("main--tablet--light")):t.main.classList.remove("main--tablet","main--light"),a.forEach(([t,e])=>{null!==t&&t.classList.remove(e)}),s.forEach(([t,e])=>{t.forEach(t=>t.classList.remove(e))}))}function p(){g(event,!1),(JSON.parse(localStorage.getItem("todoList"))||[]).forEach(([t,e,o])=>{m(t,e,o,!1),s("todo__input","todo__mark","todo__text"),d()}),"sort__param--active"===JSON.parse(localStorage.getItem("activeSortBtn"))?(t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),t.sortActiveBtn.classList.add("activeBtn"),u.call(t.sortActiveBtn)):"sort__param--completed"===JSON.parse(localStorage.getItem("activeSortBtn"))&&(t.sortParams.forEach(t=>{t.classList.remove("activeBtn")}),t.sortCompletedBtn.classList.add("activeBtn"),u.call(t.sortCompletedBtn))}function h(){let t=(JSON.parse(localStorage.getItem("todoList"))||[]).map(([t,e,o])=>Number(this.parentNode.getAttribute("data-id"))===Number(o)?[this.value,e,o]:[t,e,o]);localStorage.setItem("todoList",JSON.stringify(t))}document.addEventListener("DOMContentLoaded",p),t.mediaQueryMobile.addEventListener("change",c),t.mediaQueryTablet.addEventListener("change",i),t.todoAddMark.addEventListener("click",m),t.sortAllBtn.addEventListener("click",u),t.sortActiveBtn.addEventListener("click",u),t.sortCompletedBtn.addEventListener("click",u),t.sortCompletedClear.addEventListener("click",function(){let a=document.querySelectorAll(".todo__input"),l=0;if(0===a.length)return;let i=(JSON.parse(localStorage.getItem("todoList"))||[]).filter(([t,e,o])=>{if("completedTodo"!==e)return[t,e,o]});localStorage.setItem("todoList",JSON.stringify([...i])),e(),a.forEach(e=>{e.classList.contains("completedTodo")?e.remove():(t.todosList.append(e),l++)}),o("Add something...",l),t.mediaQueryMobile.matches?t.todosList.after(t.todosSort):t.todoWrapper.append(t.todosSort),t.todoWrapper.append(t.footerText),localStorage.setItem("activeSortBtn",JSON.stringify("sort__param--all")),r(),s("todo__input","todo__mark","todo__text"),d()}),t.sortParams.forEach(t=>t.addEventListener("click",_)),document.addEventListener("DOMContentLoaded",p),t.changeThemeBtn.addEventListener("click",g),t.todoAddText.addEventListener("keydown",function(t){"Enter"===t.key&&m(this.value,"activeTodo")}),t.todosList.addEventListener("click",t=>{if(t.target.classList.contains("todo__mark")){var e;let o;(e=t.target).parentNode.classList.toggle("activeTodo"),e.classList.toggle("toggle__mark--checked"),e.nextElementSibling.classList.toggle("toggle__mark--cross"),e.parentNode.classList.toggle("completedTodo"),o=(JSON.parse(localStorage.getItem("todoList"))||[]).map(([t,o,a])=>(Number(a)===Number(e.parentNode.getAttribute("data-id"))&&(o=e.parentNode.classList.contains("activeTodo")?"activeTodo":"completedTodo"),[t,o,a])),localStorage.setItem("todoList",JSON.stringify(o))}else t.target.classList.contains("todo__text")?t.target.addEventListener("input",h):t.target.classList.contains("todo__cross")&&l(t.target)}),t.todosList.addEventListener("dragstart",t=>{t.target.classList.contains("todo__input")&&t.target.classList.add("selected"),t.target.style.border="1px dashed #83aaf8ff"}),t.todosList.addEventListener("dragend",t=>{if(t.target.classList.contains("todo__input")){let e,o,a,s;t.target.classList.remove("selected"),t.target.style.border="1px solid transparent",t.target.style.borderBottom="1px solid #666666",e=[...document.querySelector(".todos__list").querySelectorAll(".todo__input")].map(t=>Number(t.dataset.id)),o=JSON.parse(localStorage.getItem("todoList"))||[],a=e.map(t=>o.find(([e,o,a])=>Number(a)===t)),s=o.filter(([t,o,a])=>!e.includes(Number(a))),localStorage.setItem("todoList",JSON.stringify([...a,...s]))}}),t.todosList.addEventListener("dragover",e=>{e.preventDefault();let o=document.querySelector(".selected"),a=e.target,s=o.offsetHeight,r=e.offsetY;if(o!==a&&a.classList.contains("todo__input"))if(r<s/2){let e=a===o.nextElementSibling?o.nextElementSibling:a;t.todosList.insertBefore(e,o)}else{let e=a===o.previousElementSibling?o.previousElementSibling:a;t.todosList.insertBefore(o,e)}}),t.mediaQueryMobile.matches&&c(t.mediaQueryMobile),t.mediaQueryTablet.matches&&i(t.mediaQueryTablet);
//# sourceMappingURL=ToDo-JavaScript-.7d1675c3.js.map
